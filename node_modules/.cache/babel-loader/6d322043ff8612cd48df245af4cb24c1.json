{"ast":null,"code":"import _objectSpread from\"/Users/kylejson/Documents/react-for-beginners/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/kylejson/Documents/react-for-beginners/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kylejson/Documents/react-for-beginners/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/kylejson/Documents/react-for-beginners/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/kylejson/Documents/react-for-beginners/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Header from'./Header';import Order from'./Order';import Inventory from'./Inventory';import Fish from'./Fish';import sampleFishes from'../sample-fishes';import base from'../base';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={fishes:{},order:{}};_this.addFish=function(fish){var fishes=_objectSpread({},_this.state.fishes);fishes[\"fish\".concat(Date.now())]=fish;_this.setState({fishes:fishes});};_this.updateFish=function(key,updatedFish){var fishes=_objectSpread({},_this.state.fishes);fishes[key]=updatedFish;_this.setState({fishes:fishes});};_this.deleteFish=function(key){var fishes=_objectSpread({},_this.state.fishes);fishes[key]=null;_this.setState({fishes:fishes});};_this.addToOrder=function(key){var order=_objectSpread({},_this.state.order);if(key in order){order[key]+=1;}else{order[key]=1;}_this.setState({order:order});};_this.deleteFromOrder=function(key){var order=_objectSpread({},_this.state.order);delete order[key];_this.setState({order:order});};_this.loadSampleFishes=function(){_this.setState({fishes:sampleFishes});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var params=this.props.match.params;var localStorageRef=localStorage.getItem(params.storeId);if(localStorageRef){this.setState({order:JSON.parse(localStorageRef)});}this.ref=base.syncState(\"\".concat(params.storeId,\"/fishes\"),{context:this,state:'fishes'});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var params=this.props.match.params;var orderAsString=JSON.stringify(this.state.order);localStorage.setItem(params.storeId,orderAsString);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){base.removeBinding();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"catch-of-the-day\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu\"},/*#__PURE__*/React.createElement(Header,{tagline:\"Fresh Seafood Market\"}),/*#__PURE__*/React.createElement(\"ul\",{className:\"fishes\"},Object.keys(this.state.fishes).map(function(key){return/*#__PURE__*/React.createElement(Fish,{key:key,index:key,details:_this2.state.fishes[key],addToOrder:_this2.addToOrder});}))),/*#__PURE__*/React.createElement(Order,{fishes:this.state.fishes,order:this.state.order,deleteFromOrder:this.deleteFromOrder}),/*#__PURE__*/React.createElement(Inventory,{addFish:this.addFish,updateFish:this.updateFish,deleteFish:this.deleteFish,loadSampleFishes:this.loadSampleFishes,fishes:this.state.fishes}));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/kylejson/Documents/react-for-beginners/src/components/App.js"],"names":["React","Header","Order","Inventory","Fish","sampleFishes","base","App","state","fishes","order","addFish","fish","Date","now","setState","updateFish","key","updatedFish","deleteFish","addToOrder","deleteFromOrder","loadSampleFishes","params","props","match","localStorageRef","localStorage","getItem","storeId","JSON","parse","ref","syncState","context","orderAsString","stringify","setItem","removeBinding","Object","keys","map","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Header from './Header';\nimport Order from './Order';\nimport Inventory from './Inventory';\nimport Fish from './Fish';\nimport sampleFishes from '../sample-fishes';\nimport base from '../base';\n\nclass App extends React.Component {\n\tstate = {\n\t\tfishes: {},\n\t\torder: {}\n\t};\n\n\tcomponentDidMount() {\n\t\tconst params = this.props.match.params;\n\t\tconst localStorageRef = localStorage.getItem(params.storeId);\n\t\tif(localStorageRef) {\n\t\t\tthis.setState({ order: JSON.parse(localStorageRef) });\n\t\t}\n\n\t\tthis.ref = base.syncState(`${params.storeId}/fishes`, {\n\t\t\tcontext: this,\n\t\t\tstate: 'fishes'\n\t\t});\n\t};\n\n\tcomponentDidUpdate() {\n\t\tconst params = this.props.match.params;\n\t\tconst orderAsString = JSON.stringify(this.state.order);\n\n\t\tlocalStorage.setItem(params.storeId, orderAsString);\n\t};\n\n\tcomponentWillUnmount() {\n\t\t\n\t\tbase.removeBinding();\n\t};\n\n\taddFish = fish => {\n\t\tconst fishes = {...this.state.fishes};\n\n\t\tfishes[`fish${Date.now()}`] = fish;\n\n\t\tthis.setState({\n\t\t\tfishes: fishes\n\t\t});\n\t};\n\n\tupdateFish = (key, updatedFish) => {\n\t\tconst fishes = {...this.state.fishes};\n\n\t\tfishes[key] = updatedFish;\n\n\t\tthis.setState({\n\t\t\tfishes: fishes\n\t\t});\n\t};\n\n\tdeleteFish = (key) => {\n\t\tconst fishes = {...this.state.fishes};\n\n\t\tfishes[key] = null;\n\n\t\tthis.setState({\n\t\t\tfishes: fishes\n\t\t});\n\t};\n\n\taddToOrder = (key) => {\n\t\tconst order = {...this.state.order};\n\n\t\tif (key in order) {\n\t\t\torder[key] += 1;\n\t\t} else {\n\t\t\torder[key] = 1;\n\t\t} \n\n\t\tthis.setState({\n\t\t\torder: order\n\t\t});\n\t};\n\n\tdeleteFromOrder = (key) => {\n\t\tconst order = {...this.state.order};\n\n\t\tdelete order[key];\n\n\t\tthis.setState({\n\t\t\torder: order\n\t\t});\n\t}\n\n\tloadSampleFishes = () => {\n\t\tthis.setState({\n\t\t\tfishes: sampleFishes\n\t\t});\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"catch-of-the-day\">\n\t\t\t\t<div className=\"menu\">\n\t\t\t\t\t<Header tagline=\"Fresh Seafood Market\"/>\n\t\t\t\t\t<ul className=\"fishes\">\n\t\t\t\t\t\t{ Object.keys(this.state.fishes).map(key => \n\t\t\t\t\t\t\t<Fish \n\t\t\t\t\t\t\tkey={key} \n\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\tdetails={this.state.fishes[key]} \n\t\t\t\t\t\t\taddToOrder={this.addToOrder}\n\t\t\t\t\t\t/> \n\t\t\t\t\t\t)}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t<Order \n\t\t\t\tfishes={this.state.fishes} \n\t\t\t\torder={this.state.order}\n\t\t\t\tdeleteFromOrder={this.deleteFromOrder}\n\t\t\t/>\n\t\t\t<Inventory \n\t\t\t\taddFish={this.addFish} \n\t\t\t\tupdateFish={this.updateFish}\n\t\t\t\tdeleteFish={this.deleteFish}\n\t\t\t\tloadSampleFishes={this.loadSampleFishes}\n\t\t\t\tfishes={this.state.fishes}\n\t\t\t/>\t\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}